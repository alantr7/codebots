
define_func c
begin
  set $rv 10
  exit_func
end
define_func b
begin
  push_stack
  set $cs #this_module
  push_func c 0
  call
  push $rv
  pop_func
  eval $rv pop
  pop_stack
  exit_func
end
define_func a
begin
  define_var arr
  push_stack
  set $cs #this_module
  push_func array 1
  set $exp1 1
  set_arg 0 $exp1
  call
  push $rv
  pop_func
  eval arr pop
  pop_stack

  set $cs #this_module
  set $exp3 0
  set $exp1 *arr
  set $exp2 0
  array_set $exp1 $exp2 $exp3

  push_stack
  set $cs #this_module
  push *arr
  eval $rv pop
  pop_stack
  exit_func
end
define_func main
begin
  define_var arr
  push_stack
  set $cs #this_module
  push_func array 1
  set $exp1 2
  set_arg 0 $exp1
  call
  push $rv
  pop_func
  eval arr pop
  pop_stack

  set $cs #this_module
  push_stack
  set $cs #this_module
  push_func a 0
  call
  push $rv
  pop_func
  eval $exp3 pop
  pop_stack
  set $exp1 *arr
  set $exp2 0
  array_set $exp1 $exp2 $exp3


  set $cs #this_module
  push_stack
  set $cs #this_module
  push_func b 0
  call
  push $rv
  pop_func
  eval $exp3 pop
  pop_stack
  set $exp1 *arr
  set $exp2 1
  array_set $exp1 $exp2 $exp3

  set $cs #this_module
  push_func print 1
  push_stack
  push "First: "
  set $cs #this_module

  set $cs #this_module
  set $exp1 *arr
  set $exp2 0
  array_get $exp1 $exp2 $exp1
  push $exp1

  eval $exp1 pop pop +
  pop_stack
  set_arg 0 $exp1
  call
  pop_func
  set $cs #this_module
  push_func print 1
  push_stack
  push "Second: "
  set $cs #this_module

  set $cs #this_module
  set $exp1 *arr
  set $exp2 1
  array_get $exp1 $exp2 $exp1
  push $exp1

  eval $exp1 pop pop +
  pop_stack
  set_arg 0 $exp1
  call
  pop_func
end
