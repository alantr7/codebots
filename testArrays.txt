
define_func main
begin
  define_var array
  push_stack
  push_func array
  set $exp1 2
  set_arg 0 $exp1
  call
  push $rv
  pop_func
  eval array pop
  pop_stack

  set $cs #this_module
  set $exp1 *array
  set $exp2 0
  set $exp3 "Hello"
  array_set $exp1 $exp2 $exp3


  set $cs #this_module
  set $exp1 *array
  set $exp2 1
  set $exp3 "Alan!"
  array_set $exp1 $exp2 $exp3

  push_func print
  push_stack
  set $cs #this_module

  set $cs #this_module
  set $exp1 *array
  set $exp2 0
  array_get $exp1 $exp2 $exp1
  push $exp1

  push " "
  set $cs #this_module

  set $cs #this_module
  set $exp1 *array
  set $exp2 1
  array_get $exp1 $exp2 $exp1
  push $exp1

  eval $exp1 pop pop + pop +
  pop_stack
  set_arg 0 $exp1
  call
  pop_func
  push_func print
  push_stack
  push "Array length: "
  push_func length
  push_stack
  set $cs #this_module
  push *array
  eval $exp1 pop
  pop_stack
  set_arg 0 $exp1
  call
  push $rv
  pop_func
  eval $exp1 pop pop +
  pop_stack
  set_arg 0 $exp1
  call
  pop_func
end
